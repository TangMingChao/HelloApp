(function(t){function e(e){for(var o,s,r=e[0],c=e[1],l=e[2],f=0,m=[];f<r.length;f++)s=r[f],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&m.push(n[s][0]),n[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(m.length)m.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],o=!0,r=1;r<a.length;r++){var c=a[r];0!==n[c]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var o={},n={accountUnionAuth:0},i=[];function s(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=o,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(a,o,function(e){return t[e]}.bind(null,o));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;i.push([37,"chunk-vendors","chunk-common"]),a()})({"0eb8":function(t,e,a){"use strict";a("d9e2")},37:function(t,e,a){t.exports=a("b130")},b130:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("2a0e");var o=a("a026"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page",[a("div",{attrs:{slot:"head"},slot:"head"},[a("top-bar",{attrs:{title:"企业用户认证",left:t.goBack}})],1),a("div",{ref:"content",staticClass:"main-content-fix"},[a("div",{staticClass:"creditCard-form"},[a("ul",{staticClass:"aui-form"},[a("li",{staticClass:"aui-form-item"},[a("div",{staticClass:"aui-left"},[a("span",{staticClass:"must"},[t._v("*")]),t._v("企业名称")]),a("div",{staticClass:"aui-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.companyInfo.name,expression:"companyInfo.name"}],attrs:{type:"text",placeholder:"请输入企业名称"},domProps:{value:t.companyInfo.name},on:{input:function(e){e.target.composing||t.$set(t.companyInfo,"name",e.target.value)}}})])]),a("li",{staticClass:"aui-form-item"},[a("div",{staticClass:"aui-left"},[a("span",{staticClass:"must"},[t._v("*")]),t._v("实控人姓名")]),a("div",{staticClass:"aui-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.companyInfo.actualName,expression:"companyInfo.actualName"}],attrs:{type:"text",placeholder:"请输入实控人姓名"},domProps:{value:t.companyInfo.actualName},on:{input:function(e){e.target.composing||t.$set(t.companyInfo,"actualName",e.target.value)}}})])]),a("li",{staticClass:"aui-form-item"},[a("div",{staticClass:"aui-left"},[a("span",{staticClass:"must"},[t._v("*")]),t._v("实控人电话")]),a("div",{staticClass:"aui-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.companyInfo.actualPhone,expression:"companyInfo.actualPhone"}],attrs:{type:"text",placeholder:"请输入实控人电话"},domProps:{value:t.companyInfo.actualPhone},on:{input:function(e){e.target.composing||t.$set(t.companyInfo,"actualPhone",e.target.value)}}})])]),a("li",{staticClass:"aui-form-item"},[a("div",{staticClass:"aui-left"},[t._v("联系人同实控人")]),a("div",{staticClass:"aui-right"},[a("label",{staticClass:"aui-label"},[a("label",{staticClass:"aui-label"},[a("input",{staticClass:"aui-radio",attrs:{type:"radio",name:"control"},domProps:{checked:2==t.tabcur},on:{click:function(e){t.tabcur=2}}}),t._v("否 ")]),a("input",{staticClass:"aui-radio",attrs:{type:"radio",name:"control"},domProps:{checked:1==t.tabcur},on:{click:function(e){t.tabcur=1}}}),t._v("是 ")])])]),2==t.tabcur?a("li",{staticClass:"aui-form-item"},[a("div",{staticClass:"aui-left"},[a("span",{staticClass:"must"},[t._v("*")]),t._v("联系人")]),a("div",{staticClass:"aui-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.companyInfo.contactName,expression:"companyInfo.contactName"}],attrs:{type:"text",placeholder:"请输入联系人"},domProps:{value:t.companyInfo.contactName},on:{input:function(e){e.target.composing||t.$set(t.companyInfo,"contactName",e.target.value)}}})])]):t._e(),2==t.tabcur?a("li",{staticClass:"aui-form-item"},[a("div",{staticClass:"aui-left"},[a("span",{staticClass:"must"},[t._v("*")]),t._v("联系人电话")]),a("div",{staticClass:"aui-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.companyInfo.contactPhone,expression:"companyInfo.contactPhone"}],attrs:{type:"text",placeholder:"请输入联系人电话"},domProps:{value:t.companyInfo.contactPhone},on:{input:function(e){e.target.composing||t.$set(t.companyInfo,"contactPhone",e.target.value)}}})])]):t._e(),a("li",{staticClass:"aui-form-item item-input"},[a("div",{staticClass:"aui-left"},[a("span",{staticClass:"must"},[t._v("*")]),t._v("验证码")]),a("div",{staticClass:"aui-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.registerInfo.code,expression:"registerInfo.code"}],attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:t.registerInfo.code},on:{input:function(e){e.target.composing||t.$set(t.registerInfo,"code",e.target.value)}}})]),0==t.time?a("a",{staticClass:"btn-code",on:{click:t.sendCode}},[t._v("获取验证码")]):t._e(),t.time>0?a("van-count-down",{attrs:{time:t.time},on:{finish:function(e){t.time=0}},scopedSlots:t._u([{key:"default",fn:function(e){return[t.time>0?a("span",[t._v(t._s(e.seconds)+"s")]):t._e()]}}],null,!1,1894134237)}):t._e()],1),a("li",{staticClass:"aui-form-item"},[a("div",{staticClass:"aui-left"},[a("span",{staticClass:"must"},[t._v("*")]),t._v("设置密码")]),a("div",{staticClass:"aui-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.registerInfo.password,expression:"registerInfo.password"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.registerInfo.password},on:{input:function(e){e.target.composing||t.$set(t.registerInfo,"password",e.target.value)}}})])]),a("li",{staticClass:"aui-form-item"},[a("div",{staticClass:"aui-left"},[t._v("办公地址")]),a("div",{staticClass:"aui-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.companyInfo.addr,expression:"companyInfo.addr"}],attrs:{type:"text",placeholder:"请输入办公地址"},domProps:{value:t.companyInfo.addr},on:{input:function(e){e.target.composing||t.$set(t.companyInfo,"addr",e.target.value)}}})])]),a("li",{staticClass:"aui-form-item-special"},[a("div",{staticClass:"aui-left"},[a("span",{staticClass:"must",staticStyle:{color:"red"}},[t._v("*")]),t._v("添加附件（二选一） ")]),a("div",{staticClass:"aui-right"},[a("div",{staticClass:"img-item"},[a("div",{staticClass:"btn-add"},[a("van-uploader",{attrs:{name:"file0","after-read":t.compress}},[""==t.file0?a("i",{staticClass:"iconfont icon-add"}):a("img",{attrs:{src:t.file0.content,alt:""}})])],1),a("div",{staticClass:"text"},[t._v("营业执照")])]),a("div",{staticClass:"img-item"},[a("div",{staticClass:"btn-add"},[a("van-uploader",{attrs:{name:"file1","after-read":t.compress}},[""==t.file1?a("i",{staticClass:"iconfont icon-add"}):a("img",{attrs:{src:t.file1.content,alt:""}})])],1),a("div",{staticClass:"text"},[t._v("现场照片")])])])]),a("li",{staticClass:"agreement"},[a("label",{staticClass:"aui-label"},[a("input",{staticClass:"aui-radio",attrs:{type:"checkbox",name:"agreement"},domProps:{checked:1==t.agree},on:{click:function(e){t.agree=1}}})]),a("span",[t._v("同意")]),a("a",{attrs:{href:"javascript:;"},on:{click:t.openFinanceService}},[t._v("《企连连服务合同》")]),a("a",{staticStyle:{"margin-left":"10px"},attrs:{download:"常年融资顾问合同.doc",href:t.FINANCE_SERVICE_FILE}},[t._v("合同下载")])])]),a("div",{staticClass:"btn-spc"},[a("vc-button",{nativeOn:{click:function(e){return t.register(e)}}},[t._v("提交申请")])],1)])]),a("van-popup",{style:{width:"90%",height:"80%"},attrs:{closeable:""},model:{value:t.showService,callback:function(e){t.showService=e},expression:"showService"}},[a("finance-service")],1)],1)},i=[],s=(a("b0c0"),a("d3b7"),a("ac1f"),a("25f0"),a("1276"),a("414a"),a("7a82")),r=(a("db2c"),a("1125")),c=(a("8a58"),a("e41f")),l=(a("e930"),a("8f80")),u=a("5530"),f=a("6c85"),m=a("f130"),p=a("e224"),d=a("8452"),h=a("8194"),v=a("2934"),g=a("1b7a"),I=a("c24f"),y=a("da71"),b=a("42e4"),C=a("7c8d"),_=a.n(C),P=a("72fe"),w=a.n(P),N={data:function(){return{goBack:{icon:"icon-back",handle:function(){Object(f["c"])()}},areaList:g["a"],areaColumn:2,addrShow:!1,addrAreaCode:"",tabcur:1,agree:1,time:0,companyInfo:{name:"",actualName:"",actualPhone:"",contactName:"",contactPhone:"",addrProvince:"上海市",addrCity:"上海市",addr:""},registerInfo:{name:"",phone:"",password:"",time:0,code:""},file0:"",file1:"",FINANCE_SERVICE_FILE:y["e"],loading:!1,showService:!1,userId:""}},mounted:function(){var t=this.$el.baseURI||"";this.userId=(t||"").split("userId=")[1]||"",localStorage.setItem("userId",this.userId);var e=localStorage.getItem("companyInfo"),a=localStorage.getItem("registerInfo");e&&(this.companyInfo=JSON.parse(e)),a&&(this.registerInfo=JSON.parse(a))},methods:{openFinanceService:function(){this.showService=!0},getResult:function(){Object(f["k"])({name:"financeResult",url:"./financeResult.html"})},compress:function(t,e){var a=this;this.$toast.loading("压缩中..."),new _.a(t.file,{quality:.6,success:function(o){a[e.name]={file:new File([o],o.name),content:t.content},a.$toast.close()},error:function(t){a.$toast.close()}})},sendCode:function(){var t=this,e=this.registerInfo.phone;e?/^1[3456789]\d{9}$/.test(e)?(this.$toast.loading("发送中"),Object(v["h"])({phone:e},(function(e,a){t.time=1e4,t.$toast.error(a)}),(function(e){t.$toast.error(e)}))):this.$toast.error("手机号格式不正确"):this.$toast.error("请填写手机号")},register:function(){var t=this,e=this.checkRegisterInfo();if(e){var a=this.checkCompanyInfo();if(a){var o=this.companyInfo.addrCity;Object(I["h"])(Object(u["a"])(Object(u["a"])({workCity:o},this.registerInfo),{},{type:"00",invUserId:Object(f["h"])().invUserId||""}),(function(e,a){t.login()}),(function(e){t.$toast.error(e)}),(function(e){t.$toast.error(e)}))}}},login:function(){var t=this,e=this.registerInfo,a=e.phone,o=e.password;this.userId&&(Object(h["f"])(Object(u["a"])(Object(u["a"])({},this.companyInfo),{},{user_id:this.userId||localStorage.getItem("userId")})),localStorage.removeItem("userId")),Object(I["g"])({phone:a,sign:w()(a+w()(o).toString()+"ehaorong-salt").toString(),type:1},(function(e,a){Object(f["p"])(e.token),console.log("注册并登录成功",e),localStorage.removeItem("companyInfo"),localStorage.removeItem("registerInfo"),t.submit()}),(function(e){t.$toast.error(e)}),(function(e){t.$toast.error(e)}))},submit:function(){var t=this;this.$toast.loading("提交中..."),this.loading=!0,Object(h["a"])(Object(u["a"])(Object(u["a"])({city:this.companyInfo.addrCity},this.companyInfo),{},{file0:this.file0.file,file1:this.file1.file}),(function(e,a){t.loading=!1,t.$toast.close(),t.getResult()}),(function(e){t.loading=!1,t.$toast.error(e)}))},checkRegisterInfo:function(){var t=this.registerInfo,e=(t.name,t.phone);t.password,t.code;console.log("registerInfo",this.registerInfo);var a={name:"姓名",phone:"电话",password:"密码",code:"验证码"},o=!1;for(var n in a)if(!this.registerInfo[n]){this.$toast.error("".concat(a[n],"不能为空")),o=!0;break}return!o&&(!!/^1[3456789]\d{9}$/.test(e)||(this.$toast.error("手机号格式不正确"),!1))},checkCompanyInfo:function(){var t=this.companyInfo;t.name,t.actualName,t.actualPhone,t.contactName,t.contactPhone,t.addrProvince,t.addrCity;console.log("companyInfo",this.companyInfo);var e={name:"公司名称",actualName:"实控人",actualPhone:"实控人电话",contactName:"联系人",contactPhone:"联系人电话",addrProvince:"企业所在城市",addrCity:"企业所在城市"},a=!1;for(var o in e)if(!this.companyInfo[o]){this.$toast.error("".concat(e[o],"不能为空")),a=!0;break}return!a&&(this.file0||this.file1?1===this.agree||(this.$toast.error("请勾选同意服务合同"),!1):(this.$toast.error("请上传营业执照或现场照片"),!1))}},watch:{tabcur:function(t){console.log("tabcur",t),1==t?(this.companyInfo.contactName=this.companyInfo.actualName,this.companyInfo.contactPhone=this.companyInfo.actualPhone,this.registerInfo.name=this.companyInfo.actualName,this.registerInfo.phone=this.companyInfo.actualPhone):2==t&&(this.companyInfo.contactName="",this.companyInfo.contactPhone="",this.registerInfo.phone="",this.registerInfo.name="")},"companyInfo.actualName":function(t){1==this.tabcur&&(this.companyInfo.contactName=t,this.registerInfo.name=t)},"companyInfo.actualPhone":function(t){1==this.tabcur&&(this.companyInfo.contactPhone=t,this.registerInfo.phone=t)},"companyInfo.contactName":function(t){2==this.tabcur&&(this.registerInfo.name=t)},"companyInfo.contactPhone":function(t){2==this.tabcur&&(this.registerInfo.phone=t)},companyInfo:{handler:function(t,e){console.log("companyInfo",JSON.stringify(t)),localStorage.setItem("companyInfo",JSON.stringify(t))},deep:!0},registerInfo:{handler:function(t,e){console.log("registerInfo",JSON.stringify(t)),localStorage.setItem("registerInfo",JSON.stringify(t))},deep:!0}},components:{Page:m["a"],TopBar:p["a"],VcButton:d["a"],VanUploader:l["a"],VanPopup:c["a"],VanArea:r["a"],FinanceService:b["a"],VanCountDown:s["a"]}},S=N,O=(a("0eb8"),a("2877")),$=Object(O["a"])(S,n,i,!1,null,"14209848",null),k=$.exports;Object(f["b"])().then((function(){new o["a"]({el:"#app",render:function(t){return t(k)}})}))},d9e2:function(t,e,a){}});